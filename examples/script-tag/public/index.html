<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Пример использования cryptoPro</title>
</head>
<body>
    <form name="createSignature" novalidate>
        <fieldset>
            <legend>Создание подписи</legend>
            <label for="message">Данные для подиси: *</label>
            <br>
            <textarea id="message" cols="130" rows="5" placeholder="Введите сообщение" autofocus required>abc</textarea>
            <br><br>

            <label for="certificate">Сертификат: *</label>
            <br>
            <select id="certificate" tabindex="-1" required>
                <option disabled selected>Не выбран</option>
            </select>
            <details id="certificateDetails">
                <summary>Информация о сертификате</summary>
                <pre id="certificateInfo"></pre>
            </details>
            <pre id="certificateError"></pre>

            <label>Тип подписи: *</label>
            <br>
            <label><input type="radio" name="signatureType" value="0" checked>Совмещенная</label>
            <br>
            <label><input type="radio" name="signatureType" value="1">Отделенная</label>
            <br><br>

            <label>Алгоритм хэширования: *</label>
            <br>
            <label><input type="radio" name="hashingAlgorithm" value="GOST_3411">ГОСТ Р 34.11-94</label><br>
            <label><input type="radio" name="hashingAlgorithm" value="GOST_3411_2012_256">ГОСТ Р 34.11-2012 (256)</label><br>
            <label><input type="radio" name="hashingAlgorithm" value="GOST_3411_2012_512" checked>ГОСТ Р 34.11-2012 (512)</label><br>
            <label><input type="radio" name="hashingAlgorithm" value="GOST_3411_HMAC">ГОСТ Р 34.11-94 (HMAC)</label><br>
            <label><input type="radio" name="hashingAlgorithm" value="GOST_3411_2012_256_HMAC">ГОСТ Р 34.11-2012 (HMAC 256)</label><br>
            <label><input type="radio" name="hashingAlgorithm" value="GOST_3411_2012_512_HMAC">ГОСТ Р 34.11-2012 (HMAC 512)</label>
            <br><br>

            <hr>
            <button id="createSignature" type="submit" disabled>Создать подпись</button>
            <button type="reset">Сбросить</button>
        </fieldset>

        <fieldset>
            <legend>Результат</legend>
            <label for="hash">Хэш:</label><br>
            <textarea id="hash" cols="130" rows="5" placeholder="Не вычислен"></textarea>
            <br>
            <pre id="hashError"></pre>

            <label for="signature">Подпись:</label><br>
            <textarea id="signature" cols="130" rows="30" placeholder="Не создана"></textarea>
            <p>
                Для проверки нужно создать файл со сгенерированной подписью в кодировке UTF-8 с расширением *.sig
                <br>
                для совмещенной подписи (или *.sgn для отделенной).
            </p>
            <a href="https://www.gosuslugi.ru/pgu/eds/"
               target="_blank"
               rel="nofollow noopener noreferrer"
               title="Перейти к проверке подписи">
                Проверить подпись
            </a>
            <pre id="signatureError"></pre>
        </fieldset>

        <fieldset>
            <legend>Информация о системе</legend>
            <pre id="systemInfo"></pre>
            <pre id="systemInfoError"></pre>
        </fieldset>
    </form>

    <!-- Полифиллы для работы библиотеки -->
    <script src="polyfills/promise.js"></script>
    <script src="polyfills/find.js"></script>

    <!-- Библиотека -->
    <script src="dist/crypto-pro.js"></script>

    <!-- Полифиллы для работы демо скриптов -->
    <script src="polyfills/atob-btoa.js"></script>
    <script src="polyfills/details-element-polyfill.js"></script>

    <!-- Демо скрипты -->
    <script src="cert-list.js"></script>
    <script src="create-sign.js"></script>
    <script src="get-env-info.js"></script>
    <script src="show-cert.js"></script>
</body>
</html>
